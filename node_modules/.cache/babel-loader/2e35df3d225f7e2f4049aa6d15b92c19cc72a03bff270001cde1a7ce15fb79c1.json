{"ast":null,"code":"import React,{useState,useEffect}from'react';import{supabase}from'./lib/supabase';import{LoginPage}from'./pages/LoginPage';import{ChatPage}from'./pages/ChatPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Check for existing session\nconst checkUser=async()=>{var _session$user;const{data:{session}}=await supabase.auth.getSession();setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);setLoading(false);};checkUser();// Listen for auth changes\nconst{data:{subscription}}=supabase.auth.onAuthStateChange((event,session)=>{var _session$user2;setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);setLoading(false);});return()=>subscription.unsubscribe();},[]);const handleAuthSuccess=()=>{// This will be handled by the auth state change listener\n};const handleLogout=()=>{setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted-foreground\",children:\"Loading...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:user?/*#__PURE__*/_jsx(ChatPage,{onLogout:handleLogout}):/*#__PURE__*/_jsx(LoginPage,{onAuthSuccess:handleAuthSuccess})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","supabase","LoginPage","ChatPage","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","checkUser","_session$user","data","session","auth","getSession","subscription","onAuthStateChange","event","_session$user2","unsubscribe","handleAuthSuccess","handleLogout","className","children","onLogout","onAuthSuccess"],"sources":["/Users/lenavasilev/Desktop/n8n_assistant_v01/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { supabase } from './lib/supabase'\nimport { LoginPage } from './pages/LoginPage'\nimport { ChatPage } from './pages/ChatPage'\n\nfunction App() {\n  const [user, setUser] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Check for existing session\n    const checkUser = async () => {\n      const { data: { session } } = await supabase.auth.getSession()\n      setUser(session?.user ?? null)\n      setLoading(false)\n    }\n\n    checkUser()\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (event, session) => {\n        setUser(session?.user ?? null)\n        setLoading(false)\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  const handleAuthSuccess = () => {\n    // This will be handled by the auth state change listener\n  }\n\n  const handleLogout = () => {\n    setUser(null)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"App\">\n      {user ? (\n        <ChatPage onLogout={handleLogout} />\n      ) : (\n        <LoginPage onAuthSuccess={handleAuthSuccess} />\n      )}\n    </div>\n  )\n}\n\nexport default App "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,gBAAgB,CACzC,OAASC,SAAS,KAAQ,mBAAmB,CAC7C,OAASC,QAAQ,KAAQ,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAM,IAAI,CAAC,CAC3C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAa,SAAS,CAAG,KAAAA,CAAA,GAAY,KAAAC,aAAA,CAC5B,KAAM,CAAEC,IAAI,CAAE,CAAEC,OAAQ,CAAE,CAAC,CAAG,KAAM,CAAAf,QAAQ,CAACgB,IAAI,CAACC,UAAU,CAAC,CAAC,CAC9DR,OAAO,EAAAI,aAAA,CAACE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEP,IAAI,UAAAK,aAAA,UAAAA,aAAA,CAAI,IAAI,CAAC,CAC9BF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDC,SAAS,CAAC,CAAC,CAEX;AACA,KAAM,CAAEE,IAAI,CAAE,CAAEI,YAAa,CAAE,CAAC,CAAGlB,QAAQ,CAACgB,IAAI,CAACG,iBAAiB,CAChE,CAACC,KAAK,CAAEL,OAAO,GAAK,KAAAM,cAAA,CAClBZ,OAAO,EAAAY,cAAA,CAACN,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEP,IAAI,UAAAa,cAAA,UAAAA,cAAA,CAAI,IAAI,CAAC,CAC9BV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,MAAO,IAAMO,YAAY,CAACI,WAAW,CAAC,CAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B;AAAA,CACD,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBf,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAED,GAAIC,OAAO,CAAE,CACX,mBACEN,IAAA,QAAKqB,SAAS,CAAC,6DAA6D,CAAAC,QAAA,cAC1EpB,KAAA,QAAKmB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BtB,IAAA,QAAKqB,SAAS,CAAC,0EAA0E,CAAM,CAAC,cAChGrB,IAAA,MAAGqB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,YAAU,CAAG,CAAC,EAChD,CAAC,CACH,CAAC,CAEV,CAEA,mBACEtB,IAAA,QAAKqB,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBlB,IAAI,cACHJ,IAAA,CAACF,QAAQ,EAACyB,QAAQ,CAAEH,YAAa,CAAE,CAAC,cAEpCpB,IAAA,CAACH,SAAS,EAAC2B,aAAa,CAAEL,iBAAkB,CAAE,CAC/C,CACE,CAAC,CAEV,CAEA,cAAe,CAAAhB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}